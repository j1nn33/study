---------------------------
1. Необходимо задать переменные 
/bash - содержит bash скрипт сбора отчета




---------------------------
# Для быстрого тестирования 
# inventory.ini
# ansible.cfg

Запускать 
~./repo/study/ROLES/test_task

без ключа
ansible all -i hosts.ini -m ping -k 

с ключем
ansible.cfg   private_key_file = ~/.ssh/id_rsa
ssh-copy-id username@remote_host
ansible all -i hosts.ini -m ping -k


ansible all -i hosts.ini -m shell -a 'ps -ef | grep java'
ansible all -i hosts.ini -m command -a 'systemctl status chronyd.service'

ansible-playbook ./ipa_check_security.yml -i ./hosts.ini -k 

-------------------------------
План написания автоматизации

-------------------------------
- Развернуть ИПА
- Собрать факты (возможно оберуть в bash )
  - настройки LDAP
  - file grants
  - krb.5 tuning
  - audit
  - password policy
  - bind tuning
  - rsyslog
  
----------------

  - настройки LDAP
  - file grants
  - krb.5 tuning
  - audit
  
  - создание групп парольной политики
  - password policy
  - bind tuning
  - rsyslog

Мануал начать писать 
- bash скрипт
+ развернуть ипа
- инструкция 
  
-----------------------------------
При добавление политики 
- должна существовать группа
- приоритет политики должени быть уникальным





План внедрения и тестирования

Результат работ:

Положительный 
 - наличие автоматизации примениения настроек
 - наличие плана работ и отката 
 - наличие продукта соответствующего требованиям 
 - наличие тех.подтверждение соответсвия требованиям  

Промежуточный
 - наличие автоматизации примениения настроек
 - наличие плана работ и отката 
 - наличие продукта соответствующего части требованиям 
 - наличие тех.подтверждение соответсвия части требованиям  
 - наличие обснования о невозможности выполнения части требований
 - наличе рисков и мероприятий по митигации рисков

Негативный
 - наличие автоматизации примениения настроек
 - наличие плана работ и отката 
 - фиксация состояния 
 - наличие обснования о невозможности выполнения требований
 - наличе рисков и мероприятий по митигации рисков

План работ: 

1. развертывание новой инсталяции (согласно требованиям)
2. тестирование новой инсталяции
3. анализ документа и прикидка как его выполянть (1 итерация - разложить настойки по группам и как их тестировать)
4. фиксация ситуации с настройками на новой инсталяции
5. анализ применимости настроек
   
   - мнение эксперной группы СУДИС о применимости тех или иных настроек к нашему случаю
     (в случае не применние - фиксация обоснования причины, регистация риска и сроков устранения)
   - фиксирование потенциальных рисков и влияние на клиентов
   - проработка плана отката
   - проработка плана развертыания на работающей инсталяции с учетом rolling-update
   - получение тех решения, как применять и тестировать настройки
6. разработка и отладка автоматизации примения настроек (возможно сторонний стенд с возможностью отката)
7. валидация автоматзации коллегами и экспертной группой
8. Планирование работ на тестовом стенде (возможно с привлечением коллег из СУДИС)
9. фиксация резултатов и тестироваине результата на тесовом стенде
10. по необходимости возвращение к п. 4
11. Принятие решения о преносе настроек на работающй стенд
12. Проработка плана с учетом плана на работающем стенде 
13. Фиксация результатов и анализ влияния на клиентов
14. наличие плана работ с клиентами 
        
