BASH

####  ШАБЛОНЫ
####  РЕГУЛЯРКИ

#### -----------------------------------

##### ШАБЛОНЫ
```bash
*   - который будет соответствовать любому количеству любых символов 
?   - который соответствует одному символу 
[ ] - Сопоставление может быть выполнено с любым из символов, перечисленных 
      в квадратных скобках  
	  x[abc]y соответствует любому или всем файлам с именами
   	  xay, xby или xcy при условии, что они существуют  
	  [0–9] для всех цифр  
      ! или «шляпка» ^, то шаблон определяет все что угодно, кроме оставшихся символов в скобках 
	  
[:alnum:]    Алфавитно-цифровой
[:alpha:]    Буквенный
[:ascii:]    ASCII
[:blank:]    Пробел и символ табуляции
[:ctrl:]     Управляющий символ
[:digit:]    Число
[:graph:]    Все что угодно, кроме управляющих символов и пробела
[:lower:]    Символы в нижнем регистре
[:print:]    Все, кроме управляющих символов
[:punct:]    Символы пунктуации
[:space:]    Пробелы, включая разрывы строк
[:upper:]    Символы в верхнем регистре
[:word:]     Буквы, цифры и символ подчеркивания
[:xdigit:]   Шестнадцатеричный символ

```

##### РЕГУЛЯРКИ
```bash

cat frost.txt

1    Two roads diverged in a yellow wood,
2    And sorry I could not travel both
3    And be one traveler, long I stood
4    And looked down one as far as I could
5    To where it bent in the undergrowth;
6
7 Excerpt from The Road Not Taken by Robert Frost

# ###########
grep

grep параметры шаблон  имена_файлов

-c — вывести количество строк, соответствующих шаблону;
-E — включить расширенное регулярное выражение;
-f — читать шаблон поиска, находящийся в предоставленном файле Файл 
 может содержать несколько шаблонов, причем каждая строка включает в себя один шаблон; 
-i — игнорировать регистр символов;
-l — вывести только имя файла и путь, по которому был найден шаблон;
-n — вывести номер строки файла, в которой был найден шаблон;
-P — включить механизм регулярных выражений Perl;
-R, -r — выполнить рекурсивный поиск подкаталогов 

# поиска в каталоге /home и во всех его подкаталогах файлов, 
# содержащих слово  password независимо от регистра
 grep -R -i 'password' /home 

нужно специальное значение для определенных символов:
1) добавить перед  этими символами обратный слеш (\)
2) сообщить grep, что вам нужен специ
альный синтаксис (без обратного слеша), используя при вызове grep параметр -E
3) добавить команду egrep, которая представляет собой скрипт, вызывающий grep как grep -E
 
#### Метасимволы регулярного выражения

.  - один символ подстановки будет соответствовать любому символу, кроме символа новой строки

grep 'T.o' frost.txt

# 1 Two roads diverged in a yellow wood,
#
# 5 не возвращает (содержится слово To шаблон позволяет любому символу появляться между символами T и o)
# 3 не возвращает (содержит слово too - увствительность к регистру)

? - делает любой предшествующий ему
символ необязательным; то есть символ сопоставляется один раз, далее игнорируется

egrep 'T.?o' frost.txt
grep -E T.\?o frost.txt

# 1 Two roads diverged in a yellow wood,
# 5 To where it bent in the undergrowth;

# возвращает 5. Это потому, что метасимвол . стал необязательным, так как за ним стоит метасимвол ?
# Данный шаблон будет соответствовать любой трехсимвольной последовательности, которая начинается с T и заканчивается o, а также двухсимвольной последовательности To

*  - соответствует предыдущему элементу неограниченное количество раз

grep 'T.*o' frost.txt
# 1 Two roads diverged in a yellow wood,
# 5 To where it bent in the undergrowth;
# 7 Excerpt from The Road Not Taken by Robert Frost


+  - он соответствует предыдущему элементу, который появляется один раз или более

egrep 'T.+o' frost.txt
# 1 Two roads diverged in a yellow wood,
# 5 To where it bent in the undergrowth;
# 7 Excerpt from The Road Not Taken by Robert Frost

# вторая строка не подходит 
# 2    And sorry I could not travel both
# тк между t o нет символа o


#### Группирование

Используются скобки. Скобки также позволяют рассмтривать символы как один элемент не который можно ссылаться.

egrep 'And be one (stranger|traveler), long I stood' frost.txt
# 3    And be one traveler, long I stood

# В шаблоне используем скобки и логический оператор ИЛИ,
# который представлен символом вертикальной черты (|)


#### Квадратные скобки и классы символов

# [ ] предназначены для определения классов и списков допустимых символов
# Используя эту конструкцию, вы можете точно указать, какие символы в данной позиции в шаблоне совпадают.

 [abc]         Соответствует только символу a, или b, или c
 [1–5]         Соответствует цифрам в диапазоне от 1 до 5
 [a–zA–Z]      Соответствует любой строчной или прописной букве от a до z
 [0–9.+–*/]    Соответствует числам или указанным четырем математическим символам
 [0–9a–fA–F]   Соответствует шестнадцатеричному символу 

 \s            Пробельный символ
 \S            Непробельный символ
 \d            Цифровой символ
 \D            Нецифровой символ
 \w            Слово
 \W            Не слово
 \x            Шестнадцатеричное число (например, 0x5F)

# сокращения не поддерживаются командой egrep  
# Использовать grep с параметром –P

# найти любые числа в файле frost.txt

grep -P '\d' frost.txt

# 1    Two roads diverged in a yellow wood,
# 2    And sorry I could not travel both
# 3    And be one traveler, long I stood
# 4    And looked down one as far as I could
# 5    To where it bent in the undergrowth;
# 6
# 7 Excerpt from The Road Not Taken by Robert Frost


#### Символьные классы регулярных выражений в скобках

 [:alnum:]	Любой буквенно-цифровой символ
 [:alpha:]	Любой алфавитный символ
 [:cntrl:]  Любой управляющий символ
 [:digit:]  Любая цифра
 [:graph:]  Любой графический символ
 [:lower:]  Любой символ нижнего регистра
 [:print:]  Любой печатаемый символ
 [:punct:]  Любой знак препинания
 [:space:]  Любой пробельный символ
 [:upper:]  Любой символ верхнего регистра
 [:xdigit:] Любая шестнадцатеричная цифра
 
# выведена любая строка, содержащая символ X, за которым следует любая прописная буква или цифра 

  grep 'X[[:upper:][:digit:]]' idlist.txt
 
# User: XTjohnson
# an XWing model 7
# an X7wing model


#####  Обратные ссылки
 
регулярное выражение, которое будет извлекать любую строку, содержащую соответствующую пару полных тегов HTML

cat tags.txt:
1    Command
2    <i>line</i>
3    is
4    <div>great</div>
5    <u>!</u>
 
egrep '<([A-Za-z]*)>.*</\1>' tags.txt
# 2    <i>line</i>
# 4    <div>great</div>
# 5    <u>!</u>
 
##### Квантификаторы

 указывают, сколько раз элемент должен появиться в строке, и определяются фигурными скобками {}  
 
 T{5}    буква T должна последовательно появляться ровно пять раз 
 T{3,6}  буква T должна появляться последовательно от трех до шести раз  
 T{5,}   буква T должна появляться пять раз или более

### Якоря и границы слов

^[1-5] означает, что соответствующая строка  должна начинаться с одной из цифр от 1 до 5  
 [1-5]$ означает, что строка должна заканчиваться одной из цифр от 1 до 5
```



















